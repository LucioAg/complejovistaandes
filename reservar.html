<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitud de Reserva - Vista Andes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Estilos extra para parecerse al Form de Google */
        .form-section {
            background: #fff;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e0e0e0;
            border-top: 5px solid var(--color-primary);
        }
        .form-label { font-weight: 600; color: #333; }
        .form-check-label { font-weight: 400; color: #555; }
        .required-star { color: #d93025; margin-left: 3px; }
        
        /* Estilos para el calendario */
        .calendar-container {
            background: #fff;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .calendar-container iframe {
            border-radius: 8px;
        }

        /* Tabla de Precios */
        .pricing-table th { background-color: var(--color-dark-blue); color: white; }
        .pricing-table td, .pricing-table th { vertical-align: middle; text-align: center; font-size: 0.9rem; }
        .price-note { font-size: 0.8rem; color: #666; font-style: italic; }
        .badge-ac { background-color: var(--color-primary); color: white; font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; }
    </style>
</head>
<body class="bg-light">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="assets/img/logo.png" alt="Logo" style="height: 50px;">
                <span class="text-white fw-bold">VISTA</span><span class="text-primary">ANDES</span>
            </a>
            <div class="ms-auto"><a href="index.html" class="btn btn-outline-light btn-sm">Volver</a></div>
        </div>
    </nav>

    <div class="container" style="margin-top: 120px; max-width: 900px;">
        
        <div class="form-section text-center">
            <h1 class="h3">Solicitud de Reserva - Complejo Vista Andes</h1>
            <p class="text-muted small">Primero verificá la disponibilidad en nuestro calendario y luego completá el formulario.</p>
            <p class="text-muted small">Los pagos se coordinan por whatsapp. Si se cancela una reserva el dinero no será devuelto, aunque se le dará la posibilidad de reprogramar la estadía si lo gestiona por whatsapp 7 días antes del primer día de la reserva.</p>
        </div>

        <div class="form-section">
            <h3 class="mb-4 text-center text-uppercase fs-5">Tarifas Vigentes</h3>
            <div class="table-responsive">
                <table class="table table-bordered pricing-table table-hover">
                    <thead>
                        <tr>
                            <th>Alojamiento</th>
                            <th>Capacidad</th>
                            <th>1 Noche</th>
                            <th>2-4 Noches</th>
                            <th>5-9 Noches</th>
                            <th>+10 Noches</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="2" class="fw-bold text-start">
                                Cabañas 4, 5, 8<br>
                                <span class="fw-normal small text-muted">(1 Habitación)</span>
                            </td>
                            <td>1-3 pers</td>
                            <td>$75.000</td>
                            <td>$70.000</td>
                            <td>$65.000</td>
                            <td>$55.000</td>
                        </tr>
                        <tr>
                            <td>4 pers</td>
                            <td>$80.000</td>
                            <td>$75.000</td>
                            <td>$70.000</td>
                            <td>$60.000</td>
                        </tr>

                        <tr class="table-light">
                            <td rowspan="2" class="fw-bold text-start">
                                Cabaña 1 <span class="badge-ac ms-1">Aire Acond.</span><br>
                                <span class="fw-normal small text-muted">(1 Habitación)</span>
                            </td>
                            <td>1-3 pers</td>
                            <td>$83.000</td>
                            <td>$78.000</td>
                            <td>$73.000</td>
                            <td>$63.000</td>
                        </tr>
                        <tr class="table-light">
                            <td>4 pers</td>
                            <td>$88.000</td>
                            <td>$83.000</td>
                            <td>$78.000</td>
                            <td>$68.000</td>
                        </tr>

                        <tr>
                            <td rowspan="2" class="fw-bold text-start">
                                Cabañas 2, 6, 7<br>
                                <span class="fw-normal small text-muted">(2 Habitaciones)</span>
                            </td>
                            <td>1-3 pers</td>
                            <td>$80.000</td>
                            <td>$75.000</td>
                            <td>$70.000</td>
                            <td>$60.000</td>
                        </tr>
                        <tr>
                            <td>4 pers</td>
                            <td>$85.000</td>
                            <td>$80.000</td>
                            <td>$75.000</td>
                            <td>$65.000</td>
                        </tr>

                        <tr class="table-light">
                            <td rowspan="2" class="fw-bold text-start">
                                Cabaña 3 <span class="badge-ac ms-1">Aire Acond.</span><br>
                                <span class="fw-normal small text-muted">(2 Habitaciones)</span>
                            </td>
                            <td>1-3 pers</td>
                            <td>$88.000</td>
                            <td>$83.000</td>
                            <td>$78.000</td>
                            <td>$68.000</td>
                        </tr>
                        <tr class="table-light">
                            <td>4 pers</td>
                            <td>$93.000</td>
                            <td>$88.000</td>
                            <td>$83.000</td>
                            <td>$73.000</td>
                        </tr>

                        <tr>
                            <td class="fw-bold text-start">
                                Deptos 1 y 2<br>
                                <span class="fw-normal small text-muted">(Loft)</span>
                            </td>
                            <td>5-6 pers</td>
                            <td>$85.000</td>
                            <td>$80.000</td>
                            <td>$75.000</td>
                            <td>$65.000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="price-note mt-2">* Precios expresados en Pesos Argentinos.</p>
        </div>

        <div class="calendar-container">
            <h3 class="text-center mb-4">
                <i class="fas fa-calendar-alt me-2" style="color: var(--color-primary);"></i>
                Calendario de Disponibilidad
            </h3>
            <iframe 
                src="https://calendar.google.com/calendar/embed?src=dfd4678973bf04ba4f307780ed4c03585830dd566917e10466034b80f9e0ed46%40group.calendar.google.com&ctz=America%2FArgentina%2FMendoza&mode=MONTH&showTitle=0&showNav=1&showPrint=0&showTabs=1&showCalendars=0" 
                style="border: 0; width: 100%; height: 600px;" 
                frameborder="0" 
                scrolling="no">
            </iframe>
        </div>

        <form id="reservaForm">

            <div class="form-section">
                <div class="mb-3">
                    <label class="form-label">Nombre y Apellido <span class="required-star">*</span></label>
                    <input type="text" class="form-control" name="nombre" required placeholder="Tu respuesta">
                </div>
                <div class="mb-3">
                    <label class="form-label">Teléfono con código de área <span class="required-star">*</span></label>
                    <input type="tel" class="form-control" name="telefono" required placeholder="Tu respuesta">
                </div>
                <div class="mb-3">
                    <label class="form-label">E-mail <span class="required-star">*</span></label>
                    <input type="email" class="form-control" name="email" required placeholder="Tu respuesta">
                </div>
            </div>

            <div class="form-section">
                <div class="mb-3">
                    <label class="form-label">Fecha de Llegada (Check-in) <span class="required-star">*</span></label>
                    <input type="date" class="form-control" name="entrada" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Hora de llegada (aprox) <span class="required-star">*</span></label>
                    <input type="time" class="form-control" name="hora_in" required value="13:00">
                    <div class="form-text">Check-in regular a partir de las 13:00 HS</div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Fecha de Salida (Check-out) <span class="required-star">*</span></label>
                    <input type="date" class="form-control" name="salida" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Hora de Salida <span class="required-star">*</span></label>
                    <input type="time" class="form-control" name="hora_out" required value="10:00">
                    <div class="form-text">Check-out hasta las 10:00 AM</div>
                </div>
            </div>

            <div class="form-section">
                <div class="mb-3">
                    <label class="form-label">Cantidad de Personas <span class="required-star">*</span></label>
                    <input type="number" class="form-control" name="pax" required min="1" max="6">
                    <div class="form-text">Cabañas hasta 4 pax / Deptos hasta 6 pax.</div>
                </div>
                <div class="mb-3">
                    <label class="form-label">¿Viaja con niños? Si es así aclare cuantos <span class="required-star">*</span></label>
                    <input type="text" class="form-control" name="ninos" required placeholder="Ej: No / Si, 2 niños de 5 y 8 años">
                </div>
                <div class="mb-3">
                    <label class="form-label">¿Viaja con mascotas? Aclare número y especie <span class="required-star">*</span></label>
                    <input type="text" class="form-control" name="mascotas" required placeholder="Ej: No / Si, 1 perro pequeño">
                </div>
            </div>

            <div class="form-section">
                <label class="form-label mb-3">Alojamiento elegido <span class="required-star">*</span></label>
                
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 1" id="c1" required>
                    <label class="form-check-label" for="c1">Cabaña 1 (1 Hab - Con Aire Acond.)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 2" id="c2">
                    <label class="form-check-label" for="c2">Cabaña 2 (2 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 3" id="c3">
                    <label class="form-check-label" for="c3">Cabaña 3 (2 Hab - Con Aire Acond.)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 4" id="c4">
                    <label class="form-check-label" for="c4">Cabaña 4 (1 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 5" id="c5">
                    <label class="form-check-label" for="c5">Cabaña 5 (1 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 6" id="c6">
                    <label class="form-check-label" for="c6">Cabaña 6 (2 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 7" id="c7">
                    <label class="form-check-label" for="c7">Cabaña 7 (2 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Cabaña 8" id="c8">
                    <label class="form-check-label" for="c8">Cabaña 8 (1 Hab)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Depto 1" id="d1">
                    <label class="form-check-label" for="d1">Departamento 1 (Hasta 6 pax)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="unidad" value="Depto 2" id="d2">
                    <label class="form-check-label" for="d2">Departamento 2 (Hasta 6 pax)</label>
                </div>
            </div>

            <div class="form-section">
                <label class="form-label mb-3">Distribución de camas <span class="required-star">*</span></label>
                
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="camas" value="2 camas dobles" id="cam1" required>
                    <label class="form-check-label" for="cam1">2 camas dobles</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="camas" value="1 cama doble, 2 individuales" id="cam2">
                    <label class="form-check-label" for="cam2">1 cama doble, 2 individuales</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="camas" value="4 camas individuales" id="cam3">
                    <label class="form-check-label" for="cam3">4 camas individuales</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="camas" value="Otro" id="cam4">
                    <label class="form-check-label" for="cam4">Otro (Especificar en comentarios)</label>
                </div>
            </div>

            <div class="form-section">
                <div class="mb-3">
                    <label class="form-label">Comentarios</label>
                    <textarea class="form-control" name="comentarios" rows="3" placeholder="Tu respuesta"></textarea>
                </div>
            </div>

            <div class="text-center pb-5">
                <button type="submit" class="btn btn-primary btn-lg w-100" id="btnEnviar">ENVIAR SOLICITUD</button>
            </div>

        </form>

        <div id="mensajeExito" class="form-section text-center d-none">
            <i class="fas fa-check-circle text-success fa-4x mb-3"></i>
            <h3>¡Solicitud Enviada!</h3>
            <p>Hemos recibido tus datos correctamente. Si las fechas están disponibles, recibirás la confirmación a la brevedad.</p>
            <a href="index.html" class="btn btn-outline-dark mt-3">Volver al Inicio</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script>
        // --- URL DE APPS SCRIPT ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw6oB3Z-NtNKrazdKWlEitVzX3PPmaXY7Pn4E45OTJhBKPvyeu8gF1TBAxC7R4GrE8M/exec'; 

        const form = document.getElementById('reservaForm');
        const btn = document.getElementById('btnEnviar');
        const msg = document.getElementById('mensajeExito');

        form.addEventListener('submit', e => {
            e.preventDefault();
            btn.disabled = true;
            btn.innerText = "Procesando...";

            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => data[key] = value);

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(response => {
                if(response.result === 'success'){
                    form.classList.add('d-none');
                    document.querySelector('.h3').innerText = "Gracias";
                    msg.classList.remove('d-none');
                    window.scrollTo(0,0);
                } else {
                    alert("Error: " + response.message);
                    btn.disabled = false;
                    btn.innerText = "ENVIAR SOLICITUD";
                }
            })
            .catch(err => {
                alert("Hubo un error de conexión.");
                btn.disabled = false;
                btn.innerText = "ENVIAR SOLICITUD";
            });
        });
    </script>
</body>
</html>